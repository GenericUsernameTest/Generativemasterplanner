<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Generative Masterplanner – Boundary, Roads & Homes</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />

  <!-- Mapbox CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.5.0/mapbox-gl-draw.css" rel="stylesheet" />
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.1/mapbox-gl-geocoder.css" rel="stylesheet" />

  <!-- Your CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Layout guards so the map always shows -->
  <style>
    html, body { height: 100%; margin: 0; }
    /* Top bar */
    #top-nav {
      position: fixed; top: 0; left: 0; right: 0; height: 64px;
      display: flex; align-items: center; padding: 0 16px;
      background: #fff; border-bottom: 1px solid #e5e7eb; z-index: 10;
    }
    #site-logo { height: 40px; width: auto; display: block; }

    /* Map sits under the nav bar */
    #map { position: absolute; top: 64px; bottom: 0; left: 0; right: 0; }

    /* Overlays */
    #toolbar {
      position: absolute; top: 84px; right: 12px; z-index: 11;
      background: #fff; padding: 10px; border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,.12);
      font: 14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    #toolbar button, #toolbar input, #toolbar label { font-size: 14px; }
    #toolbar button { padding: 8px 10px; }

    .info-box {
      position: absolute; bottom: 20px; left: 20px; z-index: 11;
      background: #fff; padding: 12px; border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,.12);
      font: 14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Make Mapbox nav not clash with stats */
    .mapboxgl-ctrl-bottom-right { margin-bottom: 80px; }

    /* Toggle styling */
    .switch { position: relative; display: inline-block; width: 48px; height: 26px; }
    .switch input { display: none; }
    .slider {
      position: absolute; inset: 0; background: #ccc; border-radius: 26px;
      cursor: pointer; transition: .2s;
    }
    .slider:before {
      content: ""; position: absolute; left: 3px; top: 3px;
      width: 20px; height: 20px; border-radius: 50%; background: #fff;
      box-shadow: 0 1px 3px rgba(0,0,0,.25); transition: .2s;
    }
    .switch input:checked + .slider { background: #16a34a; }
    .switch input:checked + .slider:before { transform: translateX(22px); }

    #rotationSlider { width: 180px; }
  </style>
</head>
<body>
  <!-- Single logo bar -->
  <div id="top-nav">
    <img id="site-logo" src="logo.png" alt="Asembl">
  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- Stats -->
  <div class="info-box" id="stats"></div>

  <!-- Toolbar -->
  <div id="toolbar">
    <button id="drawSite">Draw Site Boundary</button>
    <button id="drawRoads">Draw Roads</button>
    <button id="fillHomes">Fill with Homes</button>
    <button id="clearAll">Clear All</button>

    <div id="rotate-controls" style="margin-top:10px">
      <div class="row" style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
        <label class="switch" title="Auto rotation (align to longest edge)">
          <input type="checkbox" id="autoRotate" checked>
          <span class="slider"></span>
        </label>
        <span>Auto rotation</span>
      </div>

      <div class="row" style="display:flex;align-items:center;gap:8px">
        <label for="rotationAngle">Rotation (°)</label>
        <input type="range" id="rotationSlider" min="-180" max="180" step="1" value="0" disabled>
        <input type="number" id="rotationAngle" placeholder="0" style="width:80px" disabled>
      </div>
    </div>
  </div>

  <!-- Mapbox libs -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js"></script>
  <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.5.0/mapbox-gl-draw.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.1/mapbox-gl-geocoder.min.js"></script>

  <!-- Your app JS -->
  <script src="main.js"></script>
</body>
</html>
